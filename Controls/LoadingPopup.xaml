<Window x:Class="CncControlApp.Controls.LoadingPopup"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Loading..."
        Width="720"
        Height="760"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        ResizeMode="NoResize"
        Background="Transparent"
        AllowsTransparency="True"
        Topmost="True"
        ShowInTaskbar="False">

    <!-- Resimdeki gibi tasarım -->
    <Border Background="White" 
            CornerRadius="12"
            Margin="10">

        <Grid VerticalAlignment="Top" HorizontalAlignment="Center">
            <Grid.RowDefinitions>
                <RowDefinition Height="25"/>
                <RowDefinition Height="Auto" MinHeight="434"/>
                <RowDefinition Height="Auto" MinHeight="130"/>
                <RowDefinition Height="Auto" MinHeight="79"/>
                <RowDefinition Height="0*"/>
            </Grid.RowDefinitions>

            <!-- Minimal üst boşluk -->

            <!-- RX Logo ve Dinozor -->
            <StackPanel Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center" Height="434" Width="497">
                <!-- Dinozor silhouette (resimdeki gibi) -->

                <!-- RX Logo -->
                <Grid Margin="0,0,0,20">
                    <!-- PNG Logo (if available) -->
                    <Image x:Name="PngLogo"
                           Stretch="Uniform"
                           RenderOptions.BitmapScalingMode="HighQuality"
                           RenderOptions.EdgeMode="Aliased" Height="394" Margin="10,10,10,10">
                        <Image.Source>
                            <BitmapImage UriSource="/Images/logo.png" 
                                       CreateOptions="IgnoreImageCache"
                                       CacheOption="OnLoad"/>
                        </Image.Source>
                    </Image>

                    <!-- Fallback Text Logo (RX büyük harfler) -->
                    <TextBlock x:Name="FallbackLogo"
                               Text="RX"
                               FontSize="72" 
                               FontWeight="Bold"
                               Foreground="#FF333333"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontFamily="Segoe UI"
                               TextAlignment="Center"
                               Visibility="Collapsed"/>
                </Grid>
            </StackPanel>

            <!-- Mavi Loading Animation (resimdeki gibi) -->
            <Grid Grid.Row="2" HorizontalAlignment="Center" Margin="0,10,0,20" Width="100">
                <!-- Arka plan halkaları (concentric circles) -->
                <Ellipse Width="100" Height="100" 
                         Stroke="#FFE3F2FD" 
                         StrokeThickness="2"
                         Opacity="0.2"/>

                <Ellipse Width="80" Height="80" 
                         Stroke="#FF90CAF9" 
                         StrokeThickness="3"
                         Opacity="0.3"/>

                <Ellipse Width="60" Height="60" 
                         Stroke="#FF1976D2" 
                         StrokeThickness="4"
                         Opacity="0.4"/>

                <!-- Ana loading ring (dönen dashed circle) -->
                <Ellipse Width="80" Height="80" 
                         Stroke="#FF2196F3" 
                         StrokeThickness="6"
                         StrokeDashArray="15,10"
                         Opacity="0.8">
                    <Ellipse.RenderTransform>
                        <RotateTransform x:Name="MainLoadingRotation" CenterX="40" CenterY="40"/>
                    </Ellipse.RenderTransform>
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetName="MainLoadingRotation"
                                                   Storyboard.TargetProperty="Angle"
                                                   From="0" To="360"
                                                   Duration="0:0:2"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>

                <!-- İkinci loading ring (ters yönde dönen) -->
                <Ellipse Width="60" Height="60" 
                         Stroke="#FF42A5F5" 
                         StrokeThickness="4"
                         StrokeDashArray="10,8"
                         Opacity="0.6">
                    <Ellipse.RenderTransform>
                        <RotateTransform x:Name="SecondLoadingRotation" CenterX="30" CenterY="30"/>
                    </Ellipse.RenderTransform>
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetName="SecondLoadingRotation"
                                                   Storyboard.TargetProperty="Angle"
                                                   From="360" To="0"
                                                   Duration="0:0:1.5"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>

                <!-- Merkez noktası (pulse effect) -->
                <Ellipse Width="16" Height="16" 
                         Fill="#FF1976D2"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center">
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                   From="1" To="0.3" Duration="0:0:1"
                                                   AutoReverse="True"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>

                <!-- Orbital dots (resimdeki efekt için) -->
                <Canvas Width="80" Height="80">
                    <!-- Dot 1 -->
                    <Ellipse x:Name="OrbitDot1" Width="6" Height="6" Fill="#FF1976D2" Canvas.Left="37" Canvas.Top="4">
                        <Ellipse.RenderTransform>
                            <RotateTransform x:Name="OrbitRotation1" CenterX="3" CenterY="36"/>
                        </Ellipse.RenderTransform>
                        <Ellipse.Triggers>
                            <EventTrigger RoutedEvent="Canvas.Loaded">
                                <BeginStoryboard>
                                    <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetName="OrbitRotation1"
                                                       Storyboard.TargetProperty="Angle"
                                                       From="0" To="360"
                                                       Duration="0:0:3"/>
                                        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                       From="1" To="0.2" Duration="0:0:1.5"
                                                       AutoReverse="True"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Ellipse.Triggers>
                    </Ellipse>

                    <!-- Dot 2 -->
                    <Ellipse x:Name="OrbitDot2" Width="8" Height="8" Fill="#FF42A5F5" Canvas.Left="36" Canvas.Top="2">
                        <Ellipse.RenderTransform>
                            <RotateTransform x:Name="OrbitRotation2" CenterX="4" CenterY="38"/>
                        </Ellipse.RenderTransform>
                        <Ellipse.Triggers>
                            <EventTrigger RoutedEvent="Canvas.Loaded">
                                <BeginStoryboard>
                                    <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetName="OrbitRotation2"
                                                       Storyboard.TargetProperty="Angle"
                                                       From="180" To="540"
                                                       Duration="0:0:2.5"/>
                                        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                       From="0.8" To="0.1" Duration="0:0:1.25"
                                                       AutoReverse="True"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Ellipse.Triggers>
                    </Ellipse>
                </Canvas>
            </Grid>

            <!-- "Controlling all peripherals" metni -->
            <TextBlock Grid.Row="3"
                       Text="Controlling all peripherals"
                       FontSize="18"
                       FontWeight="Normal"
                       Foreground="#FF666666"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       FontFamily="Segoe UI" Height="24" Width="205"/>

            <!-- Alt boşluk (esnek) -->
            <Grid Grid.Row="4"/>
        </Grid>
    </Border>
</Window>
