<UserControl x:Class="CncControlApp.Controls.ProbePanelView"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 mc:Ignorable="d"
 d:DesignWidth="650" d:DesignHeight="800">

 <UserControl.Resources>
 <!-- Local converter (avoid relying on parent resources) -->
 <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>

 <!-- Local copy of styles used in this control -->
 <Style x:Key="DarkCoordButtonStyle" TargetType="Button">
 <Setter Property="Background" Value="#FF3E3E40"/>
 <Setter Property="BorderBrush" Value="#FF2A2A2C"/>
 <Setter Property="BorderThickness" Value="1"/>
 <Setter Property="Foreground" Value="#FFDDDDDD"/>
 <Setter Property="FontWeight" Value="Bold"/>
 <Setter Property="FontSize" Value="11"/>
 <Setter Property="Padding" Value="10,6"/>
 <Setter Property="Cursor" Value="Hand"/>
 <Setter Property="HorizontalContentAlignment" Value="Center"/>
 <Setter Property="VerticalContentAlignment" Value="Center"/>
 <Setter Property="SnapsToDevicePixels" Value="True"/>
 <Setter Property="Template">
 <Setter.Value>
 <ControlTemplate TargetType="Button">
 <Border x:Name="Root"
 CornerRadius="10"
 Background="{TemplateBinding Background}"
 BorderBrush="{TemplateBinding BorderBrush}"
 BorderThickness="{TemplateBinding BorderThickness}">
 <Grid>
 <ContentPresenter Margin="{TemplateBinding Padding}"
 HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
 VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
 <Border x:Name="HoverOverlay" CornerRadius="10" Background="#10FFFFFF" Visibility="Collapsed"/>
 <Border x:Name="PressedOverlay" CornerRadius="10" Background="#33000000" Visibility="Collapsed"/>
 </Grid>
 <Border.Effect>
 <DropShadowEffect ShadowDepth="2" BlurRadius="6" Opacity="0.25" Color="#000000"/>
 </Border.Effect>
 </Border>
 <ControlTemplate.Triggers>
 <Trigger Property="IsMouseOver" Value="True">
 <Setter TargetName="HoverOverlay" Property="Visibility" Value="Visible"/>
 <Setter TargetName="Root" Property="Background" Value="#FF4A4A4C"/>
 </Trigger>
 <Trigger Property="IsPressed" Value="True">
 <Setter TargetName="HoverOverlay" Property="Visibility" Value="Collapsed"/>
 <Setter TargetName="PressedOverlay" Property="Visibility" Value="Visible"/>
 <Setter TargetName="Root" Property="Background" Value="#FF2D2D2F"/>
 <Setter TargetName="Root" Property="BorderBrush" Value="#FF1E1E20"/>
 <Setter TargetName="Root" Property="RenderTransformOrigin" Value="0.5,0.5"/>
 <Setter TargetName="Root" Property="RenderTransform">
 <Setter.Value>
 <ScaleTransform ScaleX="0.97" ScaleY="0.97"/>
 </Setter.Value>
 </Setter>
 </Trigger>
 <Trigger Property="IsEnabled" Value="False">
 <Setter TargetName="Root" Property="Opacity" Value="0.55"/>
 </Trigger>
 </ControlTemplate.Triggers>
 </ControlTemplate>
 </Setter.Value>
 </Setter>
 </Style>

 <!-- Unified style for all probe action buttons (match +X look) -->
 <Style x:Key="UnifiedJogButtonStyle" TargetType="Button" BasedOn="{StaticResource DarkCoordButtonStyle}">
 <Setter Property="FontSize" Value="16"/>
 <Setter Property="Padding" Value="18,8"/>
 <Setter Property="BorderBrush" Value="#FFDA9E8F"/>
 <Setter Property="BorderThickness" Value="1"/>
 <Setter Property="HorizontalAlignment" Value="Stretch"/>
 <Setter Property="VerticalAlignment" Value="Center"/>
 </Style>

 <Style x:Key="ProbeModeRadioStyle" TargetType="RadioButton">
 <Setter Property="Foreground" Value="#FFDDDDDD"/>
 <Setter Property="Background" Value="#FF3E3E40"/>
 <Setter Property="BorderBrush" Value="#FF2A2A2C"/>
 <Setter Property="BorderThickness" Value="1"/>
 <Setter Property="Padding" Value="14,6"/>
 <Setter Property="Cursor" Value="Hand"/>
 <Setter Property="HorizontalContentAlignment" Value="Center"/>
 <Setter Property="VerticalContentAlignment" Value="Center"/>
 <Setter Property="Template">
 <Setter.Value>
 <ControlTemplate TargetType="RadioButton">
 <Border x:Name="Root"
 Background="{TemplateBinding Background}"
 BorderBrush="{TemplateBinding BorderBrush}"
 BorderThickness="{TemplateBinding BorderThickness}"
 CornerRadius="10"
 SnapsToDevicePixels="True">
 <ContentPresenter Margin="{TemplateBinding Padding}"
 HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
 VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
 <Border.Effect>
 <DropShadowEffect ShadowDepth="2" BlurRadius="6" Opacity="0.25" Color="#000000"/>
 </Border.Effect>
 </Border>
 <ControlTemplate.Triggers>
 <Trigger Property="IsMouseOver" Value="True">
 <Setter TargetName="Root" Property="Background" Value="#FF4A4A4C"/>
 </Trigger>
 <Trigger Property="IsChecked" Value="True">
 <Setter TargetName="Root" Property="Background" Value="#FF4CAF50"/>
 <Setter TargetName="Root" Property="BorderBrush" Value="#FF388E3C"/>
 <Setter Property="Foreground" Value="White"/>
 </Trigger>
 <Trigger Property="IsEnabled" Value="False">
 <Setter TargetName="Root" Property="Opacity" Value="0.6"/>
 </Trigger>
 </ControlTemplate.Triggers>
 </ControlTemplate>
 </Setter.Value>
 </Setter>
 </Style>

 <Style x:Key="CoordinateTextStyle" TargetType="TextBlock">
 <Setter Property="Foreground" Value="#FF4CAF50"/>
 <Setter Property="FontFamily" Value="Consolas, 'Courier New', monospace"/>
 <Setter Property="FontSize" Value="10"/>
 <Setter Property="FontWeight" Value="Bold"/>
 </Style>
 </UserControl.Resources>

 <Border x:Name="RootBorder"
 BorderThickness="2"
 CornerRadius="15"
 Visibility="Visible">
 <Grid Margin="0,10,0,10">
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="160"/>
 <RowDefinition/>
 </Grid.RowDefinitions>

 <!-- TOP: Coordinates (Local, spacer, Machine, spacer, Buttons) -->

 <!-- Mode selector (radio-like buttons) -->
 <Border
 Background="#FF2D2D30"
 CornerRadius="10"
 Padding="0,8,0,8"
 BorderThickness="1"
 BorderBrush="#FFA2A2A4"
 Margin="0,0,0,8">
 <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Height="50">
 <RadioButton x:Name="ProbeModeRadio" GroupName="ProbeModes" IsChecked="True"
 Content="Probe" Margin="6,0"
 Style="{StaticResource ProbeModeRadioStyle}" BorderBrush="#FF34BD2D"/>
 <RadioButton x:Name="CenterOuterModeRadio" GroupName="ProbeModes"
 Content="Center From Outer edges" Margin="6,0"
 Style="{StaticResource ProbeModeRadioStyle}" BorderBrush="#FF34BD2D"/>
 <RadioButton x:Name="CenterInnerModeRadio" GroupName="ProbeModes"
 Content="Center from inner edges" Margin="6,0"
 Style="{StaticResource ProbeModeRadioStyle}" BorderBrush="#FF34BD2D"/>
 <RadioButton x:Name="FindCornerModeRadio" GroupName="ProbeModes"
 Content="Find Corner" Margin="6,0"
 Style="{StaticResource ProbeModeRadioStyle}" BorderBrush="#FF34BD2D"/>
 </StackPanel>
 </Border>

 <!-- Mode content container -->
 <Border Grid.Row="1"
 Background="#FF2D2D30"
 CornerRadius="10"
 Padding="10"
 BorderThickness="1"
 BorderBrush="#FFA2A2A4"
 Margin="0,0,0,10">
 <Grid>
 <!-- PROBE MODE: original button grid -->
 <Grid x:Name="ProbeButtonsGrid" Visibility="{Binding IsChecked, ElementName=ProbeModeRadio, Converter={StaticResource BooleanToVisibilityConverter}}">
 <Grid.RowDefinitions>
 <RowDefinition Height="*"/>
 <RowDefinition Height="*"/>
 </Grid.RowDefinitions>
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="30"/>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="30"/>
 <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>

 <!-- X+/X- -->
 <Button Grid.Row="0" Grid.Column="0" Content="+X"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 Click="PlusXProbeButton_Click" Width="NaN" Height="NaN"/>
 <Button Grid.Row="1" Grid.Column="0" Content="-X"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 Click="MinusXProbeButton_Click" Width="NaN" Height="NaN"/>

 <!-- Y+/Y- -->
 <Button Grid.Row="0" Grid.Column="2" Content="+Y"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 HorizontalAlignment="Stretch" VerticalAlignment="Center"
 Click="PlusYProbeButton_Click" Width="NaN" Height="NaN"/>
 <Button Grid.Row="1" Grid.Column="2" Content="-Y"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 HorizontalAlignment="Stretch" VerticalAlignment="Center"
 Click="MinusYProbeButton_Click" Width="NaN" Height="NaN"/>

 <!-- Z Probe spanning2 rows -->
 <Button Grid.Row="0" Grid.RowSpan="2" Grid.Column="4" Content="- Z"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Click="ZProbeButton_Click" Height="NaN" Width="NaN" Margin="25,35,25,35"/>
 </Grid>

 <!-- CENTER FROM OUTER EDGES MODE -->
 <Grid x:Name="CenterOuterButtonsGrid" Visibility="{Binding IsChecked, ElementName=CenterOuterModeRadio, Converter={StaticResource BooleanToVisibilityConverter}}">
 <Grid.RowDefinitions>
 <RowDefinition Height="*"/>
 </Grid.RowDefinitions>
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="30"/>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="30"/>
 <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>

 <Button Grid.Row="0" Grid.Column="0"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 HorizontalAlignment="Stretch" VerticalAlignment="Center"
 Width="NaN" Height="NaN"
 Click="CenterXOuter_Click">
 <Button.Content>
 <TextBlock Text="Center X" TextAlignment="Center" TextWrapping="Wrap"/>
 </Button.Content>
 </Button>

 <Button Grid.Row="0" Grid.Column="2"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 HorizontalAlignment="Stretch" VerticalAlignment="Center"
 Width="NaN" Height="NaN"
 Click="CenterYOuter_Click">
 <Button.Content>
 <TextBlock Text="Center Y" TextAlignment="Center" TextWrapping="Wrap"/>
 </Button.Content>
 </Button>

 <Button Grid.Row="0" Grid.Column="4"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 HorizontalAlignment="Stretch" VerticalAlignment="Center"
 Width="NaN" Height="NaN"
 Click="CenterXYOuter_Click">
 <Button.Content>
 <TextBlock Text="Center XY" TextAlignment="Center" TextWrapping="Wrap"/>
 </Button.Content>
 </Button>
 </Grid>

 <!-- CENTER FROM INNER EDGES MODE -->
 <Grid x:Name="CenterInnerButtonsGrid" Visibility="{Binding IsChecked, ElementName=CenterInnerModeRadio, Converter={StaticResource BooleanToVisibilityConverter}}">
 <Grid.RowDefinitions>
 <RowDefinition Height="*"/>
 </Grid.RowDefinitions>
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="30"/>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="30"/>
 <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>

 <Button Grid.Row="0" Grid.Column="0"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 HorizontalAlignment="Stretch" VerticalAlignment="Center"
 Width="NaN" Height="NaN">
 <Button.Content>
 <TextBlock Text="Center XY" TextAlignment="Center" TextWrapping="Wrap"/>
 </Button.Content>
 </Button>
 <Button Grid.Row="0" Grid.Column="2"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 HorizontalAlignment="Stretch" VerticalAlignment="Center"
 Width="NaN" Height="NaN">
 <Button.Content>
 <TextBlock Text="Center X" TextAlignment="Center" TextWrapping="Wrap"/>
 </Button.Content>
 </Button>
 <Button Grid.Row="0" Grid.Column="4"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 HorizontalAlignment="Stretch" VerticalAlignment="Center"
 Width="NaN" Height="NaN">
 <Button.Content>
 <TextBlock Text="Center Y" TextAlignment="Center" TextWrapping="Wrap"/>
 </Button.Content>
 </Button>
 </Grid>

 <!-- FIND CORNER MODE -->
 <Grid x:Name="FindCornerButtonsGrid" Visibility="{Binding IsChecked, ElementName=FindCornerModeRadio, Converter={StaticResource BooleanToVisibilityConverter}}">
 <Grid.RowDefinitions>
 <RowDefinition Height="*"/>
 </Grid.RowDefinitions>
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="30"/>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="30"/>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="30"/>
 <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>

 <Button Grid.Row="0" Grid.Column="0"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 HorizontalAlignment="Stretch" VerticalAlignment="Center"
 Width="NaN" Height="NaN">
 <Button.Content>
 <TextBlock Text="Corner NW" TextAlignment="Center" TextWrapping="Wrap"/>
 </Button.Content>
 </Button>
 <Button Grid.Row="0" Grid.Column="2"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 HorizontalAlignment="Stretch" VerticalAlignment="Center"
 Width="NaN" Height="NaN">
 <Button.Content>
 <TextBlock Text="Corner NE" TextAlignment="Center" TextWrapping="Wrap"/>
 </Button.Content>
 </Button>
 <Button Grid.Row="0" Grid.Column="4"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 HorizontalAlignment="Stretch" VerticalAlignment="Center"
 Width="NaN" Height="NaN">
 <Button.Content>
 <TextBlock Text="Corner SW" TextAlignment="Center" TextWrapping="Wrap"/>
 </Button.Content>
 </Button>
 <Button Grid.Row="0" Grid.Column="6"
 Style="{StaticResource UnifiedJogButtonStyle}"
 Margin="25,5,25,5"
 HorizontalAlignment="Stretch" VerticalAlignment="Center"
 Width="NaN" Height="NaN">
 <Button.Content>
 <TextBlock Text="Corner SE" TextAlignment="Center" TextWrapping="Wrap"/>
 </Button.Content>
 </Button>
 </Grid>
 </Grid>
 </Border>

 <!-- BOTTOM: Canvas + Info side panel -->
 <Grid Grid.Row="2">
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="0.85*"/>
 <ColumnDefinition Width="0.15*"/>
 </Grid.ColumnDefinitions>

 <!-- Canvas Area -->
 <Border Grid.Column="0" Background="Black" BorderBrush="#FF4CAF50" BorderThickness="2" CornerRadius="10" ClipToBounds="True" Margin="0,0,8,0">
 <Grid ClipToBounds="True">
 <Canvas x:Name="MainGridLinesCanvas" IsHitTestVisible="False" Opacity="0.4" ClipToBounds="True"/>
 <Canvas x:Name="MainProbeCoordinatesCanvas" Background="Transparent" Margin="5" ClipToBounds="True"/>
 <Canvas x:Name="MainCrosshairCanvas" IsHitTestVisible="False" Opacity="0.8" ClipToBounds="True"/>

 <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10" Background="#AA000000">
 <TextBlock Text="LAST PROBE COORDINATES" Foreground="#FF4CAF50" FontSize="10" FontWeight="Bold" HorizontalAlignment="Center" Margin="5,5,5,2"/>
 <TextBlock x:Name="MainProbeXCoordinate" Text="X:0.000" Style="{StaticResource CoordinateTextStyle}" Margin="5,0,5,0"/>
 <TextBlock x:Name="MainProbeYCoordinate" Text="Y:0.000" Style="{StaticResource CoordinateTextStyle}" Margin="5,0,5,0"/>
 <TextBlock x:Name="MainProbeZCoordinate" Text="Z:0.000" Style="{StaticResource CoordinateTextStyle}" Margin="5,0,5,5"/>
 </StackPanel>
 </Grid>
 </Border>

 <!-- Info Panel -->
 <Border Grid.Column="1" Background="#FF2D2D30" BorderBrush="#FFA2A2A4" BorderThickness="1" CornerRadius="10" Padding="10">
 <StackPanel>
 <TextBlock Text="PROBE INFO" FontSize="14" FontWeight="Bold" Foreground="#FF4CAF50" Margin="0,0,0,10"/>
 <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
 <TextBlock Text="Feed:" FontSize="12" FontWeight="Bold" Foreground="#FFB0BEC5" Margin="0,0,6,0"/>
 <TextBlock Text="{Binding MStatus.CurrentFeed, StringFormat=F0}" FontSize="12" FontFamily="Consolas" Foreground="#FF4CAF50"/>
 <TextBlock Text=" mm/min" FontSize="12" Foreground="#FFB0BEC5" Margin="4,0,0,0"/>
 </StackPanel>
 <TextBlock Text="Probe işlemi sırasında anlık feed burada gösterilir." TextWrapping="Wrap" FontSize="11" Foreground="#FFDDDDDD"/>
 </StackPanel>
 </Border>
 </Grid>
 </Grid>
 </Border>
</UserControl>