<Window x:Class="CncControlApp.Controls.MessageDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None"
        ResizeMode="NoResize"
        SizeToContent="WidthAndHeight"
        Background="#FF1E1E20"
        AllowsTransparency="True"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False" Topmost="True">
    <Border CornerRadius="14" Background="#FF2C2C2F" BorderBrush="#FF5A5A5C" BorderThickness="1.2" Padding="0" SnapsToDevicePixels="True">
        <Border.Effect>
            <DropShadowEffect Color="#000000" BlurRadius="16" ShadowDepth="0" Opacity="0.6"/>
        </Border.Effect>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="16"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="20"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0" Background="#FF3D3D40" Padding="18,14" CornerRadius="14,14,0,0">
                <DockPanel>
                    <Ellipse Width="10" Height="10" Fill="#FFFF3B30" VerticalAlignment="Center"/>
                    <TextBlock x:Name="TitleText"
                               Margin="10,0,0,0"
                               Text="Title"
                               Foreground="White"
                               FontSize="22"
                               FontWeight="SemiBold"/>
                </DockPanel>
            </Border>

            <!-- Message (framed) -->
            <Border Grid.Row="1" Background="#FF2C2C2F" Padding="22,18,22,0">
                <Border CornerRadius="10" BorderBrush="#FF5A5A5C" BorderThickness="1" Background="#FF2F3033" Padding="12">
                    <TextBlock x:Name="MessageText"
                               Text="Message"
                               TextWrapping="Wrap"
                               Width="530"
                               Foreground="#FFDDDDDD"
                               FontSize="15"/>
                </Border>
            </Border>

            <!-- Spacer -->
            <Border Grid.Row="2" Background="Transparent"/>

            <!-- Buttons panel (centered with wide spacing) -->
            <StackPanel x:Name="ButtonsPanel" Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,0">
                <StackPanel.Resources>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="Root"
                                            Background="{TemplateBinding Background}"
                                            BorderBrush="{TemplateBinding BorderBrush}"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            CornerRadius="12">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Root" Property="Opacity" Value="0.96"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="Root" Property="Opacity" Value="0.9"/>
                                        </Trigger>
                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter TargetName="Root" Property="Opacity" Value="0.6"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </StackPanel.Resources>

                <Button x:Name="YesButton" Content="STOP Run" Width="140" Height="44"
                        Background="#FFA5D6A7" Foreground="#FF1E1E20" BorderBrush="#FF7FBF84" FontSize="14" FontWeight="SemiBold" Click="YesButton_Click"/>
                <!-- spacer = one button width -->
                <Rectangle Width="140" Height="0"/>
                <Button x:Name="NoButton" Content="Continue" Width="140" Height="44"
                        Background="#FFF28B82" Foreground="#FF1E1E20" BorderBrush="#FFD98078" FontSize="14" FontWeight="SemiBold" Click="NoButton_Click"/>
                <!-- spacer = one button width -->
                <Rectangle Width="140" Height="0"/>
                <Button x:Name="OkButton" Content="OK" Width="120" Height="44"
                        Background="#FF90CAF9" Foreground="#FF1E1E20" BorderBrush="#FF6FB6F3" FontSize="14" FontWeight="SemiBold" Click="OkButton_Click"/>
            </StackPanel>

            <!-- Spacer -->
            <Border Grid.Row="4" Background="Transparent"/>

            <!-- Progress panel (shown for PersistentStop kind) -->
            <Border x:Name="ProgressPanel" Grid.Row="5" Background="#FF3A3A3E" Padding="14" CornerRadius="12" Visibility="Collapsed" Margin="22,0,22,22">
                <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" Height="300" Width="880">
                    <TextBlock x:Name="ProgressLogText" FontFamily="Consolas" FontSize="13" Foreground="#FFCCCCCC" TextWrapping="Wrap"/>
                </ScrollViewer>
            </Border>
        </Grid>
    </Border>
</Window>