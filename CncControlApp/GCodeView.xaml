<UserControl x:Class="CncControlApp.GCodeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:CncControlApp"
             mc:Ignorable="d"
             d:DesignHeight="960" d:DesignWidth="1000"
             Loaded="GCodeView_Loaded"
             Unloaded="GCodeView_Unloaded"
             UseLayoutRounding="True"
             SnapsToDevicePixels="True">

    <UserControl.Resources>
        <Style TargetType="Button">
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style x:Key="OverrideResetButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="180"/>
            <Setter Property="Height" Value="34"/>
            <Setter Property="Margin" Value="0,6,0,10"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#FFF0F0F0"/>
            <Setter Property="Background" Value="#FF3E3E40"/>
            <Setter Property="BorderBrush" Value="#FF2A2A2C"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Root"
                                CornerRadius="10"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <Grid>
                                <ContentPresenter HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"
                                                  Margin="{TemplateBinding Padding}"/>
                                <Border x:Name="HoverOverlay" CornerRadius="10" Background="#10FFFFFF" Visibility="Collapsed"/>
                                <Border x:Name="PressedOverlay" CornerRadius="10" Background="#33000000" Visibility="Collapsed"/>
                            </Grid>
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="2" BlurRadius="6" Opacity="0.30" Color="#000000"/>
                            </Border.Effect>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="HoverOverlay" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="Root" Property="Background" Value="#FF4A4A4C"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="HoverOverlay" Property="Visibility" Value="Collapsed"/>
                                <Setter TargetName="PressedOverlay" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="Root" Property="Background" Value="#FF2D2D2F"/>
                                <Setter TargetName="Root" Property="BorderBrush" Value="#FF1E1E20"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Root" Property="Opacity" Value="0.55"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="HorizontalTouchSliderBase"
               TargetType="Slider"
               BasedOn="{StaticResource TouchFriendlySliderStyle}">
            <Setter Property="Height" Value="60"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
        </Style>
        <!-- NEW: Base slider style with custom ControlTemplate adding border + unified visuals -->
        <Style x:Key="BaseOverrideSliderStyle" TargetType="Slider" BasedOn="{StaticResource HorizontalTouchSliderBase}">
            <Setter Property="BorderBrush" Value="#FF424242"/>
            <Setter Property="Background" Value="#FF474A50"/>
            <Setter Property="Foreground" Value="#FF34C759"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Border x:Name="OuterBorder" CornerRadius="6" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" SnapsToDevicePixels="True">
                            <Grid Margin="0" HorizontalAlignment="Stretch">
                                <!-- Full-width static track background -->
                                <Border Height="6" CornerRadius="3" Background="#2A2A2A" VerticalAlignment="Center"/>
                                <Track x:Name="PART_Track" IsDirectionReversed="{TemplateBinding IsDirectionReversed}" Focusable="False" HorizontalAlignment="Stretch">
                                    <Track.DecreaseRepeatButton>
                                        <RepeatButton Command="Slider.DecreaseLarge" Style="{x:Null}" Background="Transparent" BorderBrush="{x:Null}" Focusable="False"/>
                                    </Track.DecreaseRepeatButton>
                                    <Track.Thumb>
                                        <Thumb x:Name="Thumb" Width="20" Height="26" Focusable="False">
                                            <Thumb.Template>
                                                <ControlTemplate TargetType="Thumb">
                                                    <Border CornerRadius="4" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Slider}}" BorderBrush="#FF222222" BorderThickness="1">
                                                        <Border.Effect>
                                                            <DropShadowEffect ShadowDepth="1" BlurRadius="3" Opacity="0.4"/>
                                                        </Border.Effect>
                                                    </Border>
                                                </ControlTemplate>
                                            </Thumb.Template>
                                        </Thumb>
                                    </Track.Thumb>
                                    <Track.IncreaseRepeatButton>
                                        <RepeatButton Command="Slider.IncreaseLarge" Style="{x:Null}" Background="Transparent" BorderBrush="{x:Null}" Focusable="False"/>
                                    </Track.IncreaseRepeatButton>
                                </Track>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="OuterBorder" Property="BorderBrush" Value="#FF5F6368"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="OuterBorder" Property="Opacity" Value="0.5"/>
                                <Setter TargetName="Thumb" Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Update rotation style width to match (optional keep stretch) -->
        <Style x:Key="RotationAngleSliderStyle" TargetType="Slider" BasedOn="{StaticResource BaseOverrideSliderStyle}">
            <Setter Property="Foreground" Value="#FF2196F3"/>
            <Setter Property="Background" Value="#FF616161"/>
            <Setter Property="BorderBrush" Value="#FF424242"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="ToolTip" Value="Rotate part between -180° and +180°"/>
        </Style>
        <Style x:Key="OverrideValueTextStyle" TargetType="TextBlock">
            <Setter Property="Width" Value="150"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="TextWrapping" Value="NoWrap"/>
            <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="TextAlignment" Value="Center"/>
            <Setter Property="ClipToBounds" Value="True"/>
        </Style>
        <Style x:Key="RoundedTabButtonStyle" TargetType="Button">
            <Setter Property="MinWidth" Value="160"/>
            <Setter Property="Padding" Value="22,6"/>
            <Setter Property="Height" Value="42"/>
            <Setter Property="Margin" Value="0,0,6,0"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#FFE0E0E0"/>
            <Setter Property="Background" Value="#FF474A50"/>
            <Setter Property="BorderBrush" Value="#FF5F6368"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Root"
                                CornerRadius="5"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <Grid>
                                <ContentPresenter HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"
                                                  Margin="2,0,2,0"
                                                  RecognizesAccessKey="True"/>
                                <Border x:Name="HoverOverlay" CornerRadius="5" Background="#26FFFFFF" Visibility="Collapsed"/>
                                <Border x:Name="PressedOverlay" CornerRadius="5" Background="#33000000" Visibility="Collapsed"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="HoverOverlay" Property="Visibility" Value="Visible"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="HoverOverlay" Property="Visibility" Value="Collapsed"/>
                                <Setter TargetName="PressedOverlay" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="Root" Property="RenderTransformOrigin" Value="0.5,0.5"/>
                                <Setter TargetName="Root" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.97" ScaleY="0.97"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Root" Property="Opacity" Value="0.55"/>
                            </Trigger>
                            <Trigger Property="Tag" Value="Active">
                                <Setter TargetName="Root" Property="Background" Value="#FF0056CC"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter TargetName="Root" Property="BorderBrush" Value="#FF1976D2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="RotateButtonStyle"
               TargetType="Button"
               BasedOn="{StaticResource RoundedTabButtonStyle}">
            <Setter Property="MinWidth" Value="0"/>
            <Setter Property="Width" Value="80"/>
            <Setter Property="Padding" Value="10,6"/>
        </Style>
        <Style x:Key="HorizontalMenuButtonStyle" TargetType="Button">
            <Setter Property="MinWidth" Value="140"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Margin" Value="0,0,10,0"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#FFE0E0E0"/>
            <Setter Property="Background" Value="#FF474A50"/>
            <Setter Property="BorderBrush" Value="#FF5F6368"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Root"
                                CornerRadius="5"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <Grid>
                                <ContentPresenter HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"
                                                  Margin="{TemplateBinding Padding}"
                                                  RecognizesAccessKey="True"/>
                                <Border x:Name="HoverOverlay" CornerRadius="5" Background="#26FFFFFF" Visibility="Collapsed"/>
                                <Border x:Name="PressedOverlay" CornerRadius="5" Background="#33000000" Visibility="Collapsed"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="HoverOverlay" Property="Visibility" Value="Visible"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="HoverOverlay" Property="Visibility" Value="Collapsed"/>
                                <Setter TargetName="PressedOverlay" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="Root" Property="RenderTransformOrigin" Value="0.5,0.5"/>
                                <Setter TargetName="Root" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.97" ScaleY="0.97"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Root" Property="Opacity" Value="0.55"/>
                            </Trigger>
                            <Trigger Property="Tag" Value="Active">
                                <Setter TargetName="Root" Property="Background" Value="#FF0056CC"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter TargetName="Root" Property="BorderBrush" Value="#FF1976D2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid Background="#FF626262">
        <Grid.RowDefinitions>
            <RowDefinition Height="220"/>
            <RowDefinition Height="90"/>
            <!-- New: Horizontal Menu Panel -->
            <RowDefinition Height="10"/>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <!-- Remove reserved space; allow right column to collapse when empty -->
            <ColumnDefinition Width="Auto" MinWidth="0"/>
        </Grid.ColumnDefinitions>

        <!-- Statistics Panel - 2x3 Grid Layout (Simple, No Nested Panels) -->
        <Border Grid.Row="0" Grid.Column="0" Margin="10,0,10,6"
                Background="#FF2D2D30" CornerRadius="8"
    BorderBrush="#FFA2A2A4" BorderThickness="1" 
        Height="204" VerticalAlignment="Bottom">
            <Grid Margin="8">
                <!-- 2 columns x 3 rows grid -->
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="6"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="6"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Row 0, Column 0: FILE + SIZE + LINES -->
                <Border Grid.Row="0" Grid.Column="0"
             Background="#FF404956"
 BorderBrush="#FFA2A2A4"
 BorderThickness="1"
         CornerRadius="4"
 Padding="8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Orientation="Vertical" Margin="0,0,20,0">
                            <TextBlock Text="FILE NAME" FontSize="10" Foreground="YellowGreen"
            FontWeight="SemiBold" Margin="0,0,0,2"/>
                            <TextBlock x:Name="FileNameTextBlock"
    Text="No file selected"
    FontSize="18"
    Foreground="LightGoldenrodYellow"
        FontWeight="Medium"
         TextTrimming="CharacterEllipsis"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Orientation="Vertical" Margin="0,0,20,0">
                            <TextBlock Text="SIZE" FontSize="10" Foreground="YellowGreen"
            FontWeight="SemiBold" Margin="0,0,0,2"/>
                            <TextBlock x:Name="FileSizeTextBlock"
     Text="0 KB"
          FontSize="18"
       Foreground="#FFDDDDDD"
          FontWeight="Medium"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Orientation="Vertical">
                            <TextBlock Text="LINES" FontSize="10" Foreground="YellowGreen"
     FontWeight="SemiBold" Margin="0,0,0,2"/>
                            <TextBlock x:Name="TotalLinesTextBlock"
        Text="0"
     FontSize="18"
             Foreground="#FFDDDDDD"
          FontWeight="Medium"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Row 0, Column 2: DISTANCES -->
                <Border Grid.Row="0" Grid.Column="2"
  Background="#FF404956"
      BorderBrush="#FFA2A2A4"
   BorderThickness="1"
          CornerRadius="4"
           Padding="8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Orientation="Vertical" Margin="0,0,8,0" HorizontalAlignment="Center">
                            <TextBlock Text="LINEAR CUT" FontSize="10" Foreground="Orange"
      FontWeight="SemiBold" Margin="0,0,0,2" TextAlignment="Center"/>
                            <TextBlock x:Name="LinearDistanceTextBlock"
   Text="0.0mm"
 FontSize="18"
          Foreground="Orange"
       FontWeight="Bold" TextAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Orientation="Vertical" Margin="0,0,8,0" HorizontalAlignment="Center">
                            <TextBlock Text="RAPID MOVE" FontSize="10" Foreground="LightBlue"
           FontWeight="SemiBold" Margin="0,0,0,2" TextAlignment="Center"/>
                            <TextBlock x:Name="RapidDistanceTextBlock"
    Text="0.0mm"
      FontSize="18"
   Foreground="LightBlue"
 FontWeight="Bold" TextAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Orientation="Vertical" Margin="0,0,8,0" HorizontalAlignment="Center">
                            <TextBlock Text="ARC CUT" FontSize="10" Foreground="LightGreen"
     FontWeight="SemiBold" Margin="0,0,0,2" TextAlignment="Center"/>
                            <TextBlock x:Name="ArcDistanceTextBlock"
        Text="0.0mm"
         FontSize="18"
     Foreground="LightGreen"
FontWeight="Bold" TextAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="3" Orientation="Vertical" HorizontalAlignment="Center">
                            <TextBlock Text="TOTAL DISTANCE" FontSize="10" Foreground="Gold"
        FontWeight="SemiBold" Margin="0,0,0,2" TextAlignment="Center"/>
                            <TextBlock x:Name="TotalDistanceTextBlock"
   Text="0.0mm"
          FontSize="18"
          Foreground="Gold"
       FontWeight="Bold" TextAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Row 2, Column 0: X/Y/Z RANGE -->
                <Border Grid.Row="2" Grid.Column="0"
      Background="#FF404956"
       BorderBrush="#FFA2A2A4"
    BorderThickness="1"
          CornerRadius="4"
           Padding="8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Orientation="Vertical" Margin="0,0,20,0">
                            <TextBlock Text="X RANGE" FontSize="10" Foreground="YellowGreen"
FontWeight="SemiBold" Margin="0,0,0,2"/>
                            <TextBlock x:Name="XDistanceTextBlock"
  Text="0.0mm"
            FontSize="18"
    Foreground="AliceBlue"
               FontWeight="Medium"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Orientation="Vertical" Margin="0,0,20,0">
                            <TextBlock Text="Y RANGE" FontSize="10" Foreground="YellowGreen"
           FontWeight="SemiBold" Margin="0,0,0,2"/>
                            <TextBlock x:Name="YDistanceTextBlock"
      Text="0.0mm"
  FontSize="18"
  Foreground="AliceBlue"
           FontWeight="Medium"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Orientation="Vertical">
                            <TextBlock Text="Z RANGE" FontSize="10" Foreground="YellowGreen"
    FontWeight="SemiBold" Margin="0,0,0,2"/>
                            <TextBlock x:Name="ZDistanceTextBlock"
      Text="0.0mm"
        FontSize="18"
       Foreground="AliceBlue"
        FontWeight="Medium"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Row 2, Column 2: TIMES -->
                <Border Grid.Row="2" Grid.Column="2"
    Background="#FF404956"
   BorderBrush="#FFA2A2A4"
     BorderThickness="1"
         CornerRadius="4"
              Padding="8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Orientation="Vertical" Margin="0,0,8,0" HorizontalAlignment="Center">
                            <TextBlock Text="CUT TIME" FontSize="10" Foreground="Orange"
         FontWeight="SemiBold" Margin="0,0,0,2" TextAlignment="Center"/>
                            <TextBlock x:Name="LinearTimeTextBlock"
             Text="0.0min"
            FontSize="18"
        Foreground="Orange"
    FontWeight="Medium" TextAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Orientation="Vertical" Margin="0,0,8,0" HorizontalAlignment="Center">
                            <TextBlock Text="MOVE TIME" FontSize="10" Foreground="LightBlue"
          FontWeight="SemiBold" Margin="0,0,0,2" TextAlignment="Center"/>
                            <TextBlock x:Name="RapidTimeTextBlock"
            Text="0.0min"
         FontSize="18"
            Foreground="LightBlue"
 FontWeight="Medium" TextAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Orientation="Vertical" Margin="0,0,8,0" HorizontalAlignment="Center">
                            <TextBlock Text="ARC TIME" FontSize="10" Foreground="LightGreen"
  FontWeight="SemiBold" Margin="0,0,0,2" TextAlignment="Center"/>
                            <TextBlock x:Name="ArcTimeTextBlock"
         Text="0.0min"
            FontSize="18"
  Foreground="LightGreen"
           FontWeight="Medium" TextAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="3" Orientation="Vertical" HorizontalAlignment="Center">
                            <TextBlock Text="TOTAL TIME" FontSize="10" Foreground="Gold"
               FontWeight="SemiBold" Margin="0,0,0,2" TextAlignment="Center"/>
                            <TextBlock x:Name="TotalTimeTextBlock"
         Text="0.0min"
   FontSize="18"
   Foreground="Gold"
          FontWeight="Bold" TextAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Row 4: PROGRESS (Spans full width) -->
                <Border Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="3"
            Background="#FF404956"
                 BorderBrush="#FFA2A2A4"
          BorderThickness="1"
        CornerRadius="4"
              Padding="8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Orientation="Vertical" Margin="0,0,12,0">
                            <TextBlock Text="PROGRESS" FontSize="10" Foreground="YellowGreen"
      FontWeight="SemiBold" Margin="0,0,0,2"/>
                            <TextBlock x:Name="ProgressTextBlock"
       Text="{Binding ExecutionProgress, Mode=OneWay, StringFormat='{}{0:F1}%', FallbackValue='0%'}"
            FontSize="22"
         Foreground="#FFDDDDDD"
        FontWeight="Medium"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Orientation="Vertical" Margin="0,0,12,0">
                            <TextBlock Text="ELAPSED TIME" FontSize="10" Foreground="YellowGreen"
         FontWeight="SemiBold" Margin="0,0,0,2" HorizontalAlignment="Center"/>
                            <TextBlock x:Name="ExecutionTimeTextBlock"
             Text="{Binding ElapsedTimeText, Mode=OneWay, FallbackValue='00:00:00'}"
    FontSize="22"
            Foreground="#FFDDDDDD"
    FontWeight="Medium" HorizontalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Orientation="Vertical">
                            <TextBlock Text="REMAINING TIME" FontSize="10" Foreground="Orange"
                 FontWeight="SemiBold" Margin="0,0,0,2" HorizontalAlignment="Right"/>
                            <TextBlock x:Name="RemainingTimeTextBlock"
      Text="{Binding RemainingTimeText, Mode=OneWay, FallbackValue='--:--:--'}"
    FontSize="22"
    Foreground="Orange"
           FontWeight="Medium" HorizontalAlignment="Right"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <!-- NEW: Horizontal Menu Panel between Stats and Canvas -->
        <Grid Grid.Row="1" Grid.Column="0" Margin="10,6,10,6">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                <!-- Frame 1: OPEN FILE and RUN -->
                <Border Background="#FF1E1E20"
     BorderBrush="#FF5F6368"
     BorderThickness="1"
    CornerRadius="5"
  Padding="6"
       Margin="0,0,20,0"
       Height="62">
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="FileButton"
           Style="{StaticResource HorizontalMenuButtonStyle}"
 Click="FileButton_Click" Foreground="#FFC8D805">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <TextBlock Text="📁" FontSize="18" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                <TextBlock Text="OPEN FILE" FontSize="11" FontWeight="SemiBold" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        <Button x:Name="RunButton"
  Style="{StaticResource HorizontalMenuButtonStyle}"
         Click="RunButton_Click"
           Foreground="#FF06E43E"
  Margin="0">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <TextBlock Text="▶️" FontSize="18" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                <TextBlock Text="RUN" FontSize="11" FontWeight="SemiBold" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        <Button x:Name="ResumeFromLineButton"
  Style="{StaticResource HorizontalMenuButtonStyle}"
         Click="ResumeFromLineButton_Click"
           Foreground="#FF00BFFF"
  Margin="0"
  Visibility="Collapsed">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <TextBlock Text="⏩" FontSize="18" Margin="0,0,8,0" VerticalAlignment="Center"/>
                                <TextBlock x:Name="ResumeButtonText" Text="RESUME" FontSize="11" FontWeight="SemiBold" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- Frame 3: FEED & RPM and G-CODE ROTATION -->
                <Border Background="#FF1E1E20"
  BorderBrush="#FF5F6368"
     BorderThickness="1"
 CornerRadius="5"
      Padding="6"
        Margin="0"
      Height="62">
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="FeedRpmButton"
             Style="{StaticResource HorizontalMenuButtonStyle}"
     Click="FeedRpmButton_Click"
     IsEnabled="{Binding IsFeedRpmButtonEnabled, RelativeSource={RelativeSource AncestorType=local:GCodeView}}">
                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="50"/>
                                </Grid.ColumnDefinitions>
                                <!-- F Row -->
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="F:" FontSize="12" FontWeight="Bold" Foreground="#FF00BFFF" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,4,0"/>
                                <TextBlock x:Name="LiveFeedRateText" Grid.Row="0" Grid.Column="1" Text="—" FontSize="12" FontWeight="Bold" Foreground="#FF00BFFF" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                                <!-- S Row -->
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="S:" FontSize="12" FontWeight="Bold" Foreground="#FFFFAA00" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,2,4,0"/>
                                <TextBlock x:Name="LiveSpindleSpeedText" Grid.Row="1" Grid.Column="1" Text="—" FontSize="12" FontWeight="Bold" Foreground="#FFFFAA00" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,2,0,0"/>
                            </Grid>
                        </Button>
                        <Button x:Name="GCodeRotationButton"
        Style="{StaticResource HorizontalMenuButtonStyle}"
    Margin="0"
        Click="GCodeRotationButton_Click">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <TextBlock Text="🧭" FontSize="18" Margin="0,0,8,0" VerticalAlignment="Center" Foreground="LightBlue"/>
                                <TextBlock Text="G-CODE ROTATION" FontSize="11" FontWeight="SemiBold" VerticalAlignment="Center" Foreground="LightBlue"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- Frame 4: LIVE SPEED DISPLAY - REMOVED, values now shown in FEED & RPM button -->

                <!-- Hidden STOP button -->
                <Button x:Name="StopButton"
   Style="{StaticResource HorizontalMenuButtonStyle}"
  Click="StopButton_Click"
    Background="#FFFF3B30" BorderBrush="#FFB02A37" Foreground="White"
   Visibility="Collapsed" IsEnabled="False">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="⏹️" FontSize="18" Margin="0,0,8,0" VerticalAlignment="Center"/>
                        <TextBlock Text="STOP / PAUSE" FontSize="11" FontWeight="SemiBold" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Grid>

        <!-- RIGHT: TOP BUTTON PANEL removed; primary actions moved to horizontal menu -->

        <!-- RIGHT: SLIDERS PANEL (feed + spindle) - moved to popup, hide here by default -->
        <Border Grid.Row="3" Grid.Column="1"
                Margin="0,4,0,4"
                BorderBrush="#FFA2A2A4"
                CornerRadius="8"
                BorderThickness="1"
                Background="#FF2D2D30"
                HorizontalAlignment="Center"
        Visibility="Collapsed"
        >
            <ScrollViewer x:Name="RightMenuScrollViewer"
                          VerticalScrollBarVisibility="Disabled"
                          HorizontalScrollBarVisibility="Disabled"
                          PanningMode="VerticalOnly"
                          CanContentScroll="False">
                <Grid Margin="8"
                      Height="{Binding RelativeSource={RelativeSource AncestorType=ScrollViewer}, Path=ViewportHeight}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="8"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- FEED PANEL -->
                    <Border Grid.Row="0" Background="#FF333437" CornerRadius="6" BorderBrush="#FF5F6368" BorderThickness="1" Padding="8">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="199*"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="2*"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Text="FEED" FontSize="9" Foreground="YellowGreen" FontWeight="SemiBold" TextAlignment="Center"/>
                            <TextBlock Grid.Row="1" Width="80" Text="{Binding ElementName=FeedOverrideSlider, Path=Value, StringFormat='{}{0:F0}%'}" FontSize="12" Foreground="#FFDDDDDD" FontWeight="Medium" HorizontalAlignment="Center" TextAlignment="Center" Margin="0,2,0,6"/>

                            <!-- Slider fills remaining row height -->
                            <Slider x:Name="FeedOverrideSlider" Grid.Row="2"
                                    Minimum="10" Maximum="200" Value="100"
                                    Orientation="Vertical"
                                    Width="40" HorizontalAlignment="Center"
                                    Style="{StaticResource TouchFriendlySliderStyle}"
                                    TickFrequency="10" SmallChange="1" LargeChange="10"
                                    IsSnapToTickEnabled="False" IsMoveToPointEnabled="True" IsManipulationEnabled="True"
                                    Stylus.IsPressAndHoldEnabled="False" Stylus.IsFlicksEnabled="False" Stylus.IsTapFeedbackEnabled="False"
                                    TouchDown="OverrideSlider_TouchDown" TouchMove="OverrideSlider_TouchMove" TouchUp="OverrideSlider_TouchUp" TouchLeave="OverrideSlider_TouchUp"
                                    LostTouchCapture="OverrideSlider_LostTouchCapture" ValueChanged="FeedOverrideSlider_ValueChanged"
                                    Background="#FF474A50" Foreground="#FF0986E6" BorderBrush="#FFA2A2A4" BorderThickness="1" Margin="0,0,0,29" Grid.RowSpan="3" Height="150"/>

                            <Button x:Name="FeedOverrideResetButton" Grid.Row="4" Content="RESET" Height="28" Width="Auto" Style="{StaticResource OverrideResetButtonStyle}" Margin="0,10,0,0" Click="FeedOverrideResetButton_Click"/>
                        </Grid>
                    </Border>

                    <!-- SPINDLE PANEL -->
                    <Border Grid.Row="1" Background="#FF333437" CornerRadius="6" BorderBrush="#FF5F6368" BorderThickness="1" Padding="8" Margin="0,8,0,16" Grid.RowSpan="2">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Text="SPINDLE" FontSize="9" Foreground="Orange" FontWeight="SemiBold" HorizontalAlignment="Stretch" TextAlignment="Center"/>
                            <TextBlock Grid.Row="1" Width="80" Text="{Binding ElementName=SpindleOverrideSlider, Path=Value, StringFormat='{}{0:+#;-#;0}%'}" FontSize="12" Foreground="#FFDDDDDD" FontWeight="Medium" TextAlignment="Center" Margin="0,2,0,6"/>

                            <!-- Slider fills remaining row height - Range: -50% to +50% -->
                            <Slider x:Name="SpindleOverrideSlider" Grid.Row="2"
                                    Minimum="-50" Maximum="50" Value="0"
                                    Orientation="Vertical"
                                    Width="40" HorizontalAlignment="Center"
                                    Style="{StaticResource TouchFriendlySliderStyle}"
                                    TickFrequency="10" SmallChange="1" LargeChange="10"
                                    IsSnapToTickEnabled="False" IsMoveToPointEnabled="True" IsManipulationEnabled="True"
                                    Stylus.IsPressAndHoldEnabled="False" Stylus.IsFlicksEnabled="False" Stylus.IsTapFeedbackEnabled="False"
                                    TouchDown="OverrideSlider_TouchDown" TouchMove="OverrideSlider_TouchMove" TouchUp="OverrideSlider_TouchUp" TouchLeave="OverrideSlider_TouchUp"
                                    LostTouchCapture="OverrideSlider_LostTouchCapture" ValueChanged="SpindleOverrideSlider_ValueChanged"
                                    Background="#FF474A50" Foreground="#FF0986E6" BorderBrush="#FFA2A2A4" BorderThickness="1" Margin="0,2,0,33" Grid.RowSpan="2" Height="150"/>

                            <Button x:Name="SpindleOverrideResetButton" Grid.Row="2" Content="RESET" Height="28" Width="Auto" Style="{StaticResource OverrideResetButtonStyle}" HorizontalAlignment="Stretch" Margin="0,6,0,10" Click="SpindleOverrideResetButton_Click" VerticalAlignment="Bottom"/>
                        </Grid>
                    </Border>
                </Grid>
            </ScrollViewer>
        </Border>

        <!-- HIDE LEGACY DUPLICATE RIGHT SLIDER PANEL -->
        <Border Grid.Row="3" Grid.Column="1"
                Visibility="Collapsed"
                Margin="0,4,0,4"
                BorderBrush="#FFA2A2A4"
                CornerRadius="8"
                BorderThickness="1"
                Background="#FF2D2D30"
                HorizontalAlignment="Center"
                Width="{Binding ElementName=TopRightPanelBorder, Path=Width}"/>

        <!-- NEW PANEL (rotation controls) and main content remainunchanged -->
        <Grid Grid.Column="0" Margin="10,18,10,3" Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <Border x:Name="NewTopPanelBorder"
         Grid.Column="0"
        Background="#FF2D2D30"
         Padding="8,1,8,1"
CornerRadius="5"
    BorderBrush="#FFA2A2A4"
    BorderThickness="1" Height="NaN" RenderTransformOrigin="0.472,0.491" Grid.ColumnSpan="2" Margin="0,-13,0,0" Visibility="Collapsed">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="76"/>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Label: ROTATE GCODE -->
                    <TextBlock Grid.Row="1" Grid.Column="0"
  Text="ROTATE GCODE"
FontSize="10"
                FontWeight="Bold"
           Foreground="YellowGreen"
        HorizontalAlignment="Center"
    Margin="0,4,0,6" VerticalAlignment="Center"/>

                    <!-- Rotation Angle Display -->

                    <!-- Rotation Slider -->
                    <Slider x:Name="RotationAngleSlider"
  Grid.Row="1"
                Grid.Column="1"
   Minimum="-180" Maximum="180" Value="0"
    TickFrequency="15"
              SmallChange="0.5"
           LargeChange="15"
        IsSnapToTickEnabled="False"
          IsMoveToPointEnabled="True"
IsManipulationEnabled="True"
        Stylus.IsPressAndHoldEnabled="False"
          Stylus.IsFlicksEnabled="False"
       Stylus.IsTapFeedbackEnabled="False"
    TouchDown="RotationAngleSlider_TouchDown"
        TouchMove="RotationAngleSlider_TouchMove"
              TouchUp="RotationAngleSlider_TouchUp"
     LostTouchCapture="RotationAngleSlider_LostTouchCapture"
         Style="{StaticResource TouchFriendlySliderStyle}"
       ValueChanged="RotationAngleSlider_ValueChanged"
       Margin="0,16,0,17"
        IsEnabled="True" Width="546" Height="40" 
      Background="#FF474A50"
     Foreground="#FF2196F3"
        BorderBrush="#FFA2A2A4" HorizontalAlignment="Center"/>

                    <!-- Control Buttons -->
                    <StackPanel Grid.Row="1" Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Height="42">
                        <Button x:Name="RotationResetButton" Content="RESET" Width="70" Style="{StaticResource RotateButtonStyle}" Height="42" Margin="0,0,15,0" Click="RotationResetButton_Click"/>
                        <Button x:Name="ApplyAngleRotationButton" Content="APPLY" Width="70" Style="{StaticResource RotateButtonStyle}" Height="42" Margin="0,0,6,0" Click="ApplyAngleRotationButton_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- REPLACED: previously empty transparent border; now touch coordinate panel -->
        </Grid>

        <!-- Main Content + Vertical Tab Bar -->
        <Grid Grid.Row="3" Grid.Column="0" Margin="10,0,10,4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Main Content Area -->
            <Border x:Name="ContentAreaBorder"
                    Grid.Column="0"
                    Background="#FF404042"
                    BorderBrush="#FF5A5A5C"
                    BorderThickness="1"
                    CornerRadius="6"
                    ClipToBounds="True"
                    Padding="0">
                <Grid>
                    <!-- G-Code Tab -->
                    <Grid x:Name="GCodeTabContent" Visibility="Visible" Background="#FF29292B">
                        
                        <ListBox x:Name="GCodeListBox"
             Background="#FF29292B"
         BorderBrush="#FFA2A2A4"
       ScrollViewer.HorizontalScrollBarVisibility="Auto"
 ScrollViewer.VerticalScrollBarVisibility="Auto"
ScrollViewer.CanContentScroll="True"
          ScrollViewer.IsDeferredScrollingEnabled="True"
               VirtualizingStackPanel.IsVirtualizing="True"
VirtualizingStackPanel.VirtualizationMode="Recycling"
          VirtualizingStackPanel.IsVirtualizingWhenGrouping="True"
          FontSize="14"
                Foreground="#FFA2A2A4">
                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <VirtualizingStackPanel/>
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Border x:Name="ItemBorder"
     Background="#FF2D2D30"
   BorderBrush="#FF4A4A4C"
 BorderThickness="1"
     CornerRadius="4"
     Margin="2"
         Padding="6,4">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="20"/>
                                                <ColumnDefinition Width="60"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>

                                            <TextBlock x:Name="CurrentIcon" Grid.Column="0" Text="➤" FontSize="14" Foreground="#FF2196F3" VerticalAlignment="Center" Visibility="Collapsed"/>
                                            <TextBlock x:Name="CheckIcon" Grid.Column="0" Text="✔" FontSize="14" Foreground="#FF4CAF50" VerticalAlignment="Center" Visibility="Collapsed"/>
                                            <TextBlock x:Name="PendingCheckIcon" Grid.Column="0" Text="➤" FontSize="14" Foreground="#FF2196F3" VerticalAlignment="Center" Visibility="Collapsed"/>

                                            <TextBlock Grid.Column="1" Text="{Binding LineNumber}" Foreground="#FF8E8E93" FontFamily="Consolas" FontSize="11" TextAlignment="Right" Margin="0,0,10,0" VerticalAlignment="Center"/>
                                            <TextBlock x:Name="LineText" Grid.Column="2" Text="{Binding GCodeLine}" Foreground="#FFDDDDDD" FontFamily="Consolas" FontSize="13" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                                        </Grid>
                                    </Border>
                                    <DataTemplate.Triggers>
                                        <DataTrigger Binding="{Binding IsInfo}" Value="True">
                                            <Setter TargetName="ItemBorder" Property="BorderBrush" Value="Gold"/>
                                            <Setter TargetName="LineText" Property="Foreground" Value="Gold"/>
                                            <Setter TargetName="ItemBorder" Property="Background" Value="#33222200"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding IsExecuted}" Value="True">
                                            <Setter TargetName="ItemBorder" Property="BorderBrush" Value="#FF4CAF50"/>
                                            <Setter TargetName="CheckIcon" Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding IsSent}" Value="True"/>
                                                <Condition Binding="{Binding IsExecuted}" Value="False"/>
                                                <Condition Binding="{Binding IsCurrentLine}" Value="False"/>
                                                <Condition Binding="{Binding IsInfo}" Value="False"/>
                                            </MultiDataTrigger.Conditions>
                                            <Setter TargetName="ItemBorder" Property="BorderBrush" Value="#FF2196F3"/>
                                            <Setter TargetName="ItemBorder" Property="Background" Value="#1A2196F3"/>
                                            <Setter TargetName="PendingCheckIcon" Property="Visibility" Value="Visible"/>
                                            <Setter TargetName="LineText" Property="Foreground" Value="#FFDDDDDD"/>
                                        </MultiDataTrigger>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding IsCurrentLine}" Value="True"/>
                                                <Condition Binding="{Binding IsInfo}" Value="False"/>
                                            </MultiDataTrigger.Conditions>
                                            <Setter TargetName="ItemBorder" Property="BorderBrush" Value="#FF2196F3"/>
                                            <Setter TargetName="ItemBorder" Property="Background" Value="#1A2196F3"/>
                                            <Setter TargetName="CurrentIcon" Property="Visibility" Value="Visible"/>
                                        </MultiDataTrigger>
                                    </DataTemplate.Triggers>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                        
                        <!-- Empty State Placeholder (shows when no file loaded) -->
                        <Border x:Name="EmptyStatePlaceholder"
                                Background="#FF29292B"
                                Visibility="Visible"
                                Panel.ZIndex="10">
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <TextBlock Text="📂" 
                                           FontSize="72" 
                                           HorizontalAlignment="Center"
                                           Margin="0,0,0,20"/>
                                <TextBlock Text="G-Code Dosyası Yüklenmedi" 
                                           FontSize="22" 
                                           FontWeight="SemiBold"
                                           Foreground="#FF9E9E9E"
                                           HorizontalAlignment="Center"
                                           Margin="0,0,0,12"/>
                                <TextBlock Text="Dosya yüklemek için üstteki 📂 OPEN butonuna tıklayın" 
                                           FontSize="14" 
                                           Foreground="#FF777777"
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Grid>
            </Border>
        </Grid>

        <!-- (Optional) Hidden control panel row (moved from Row=3 to Row=4) -->
        <Border Grid.Row="4" Grid.ColumnSpan="2"
                Background="#FF3A3A3C"
                Margin="10,2,10,24"
                BorderBrush="#FF5A5A5C"
                BorderThickness="1"
                Visibility="Collapsed"/>

        <!-- Status Bar (moved from Row=4 to Row=5) -->
        <Border Grid.Row="4" Grid.ColumnSpan="2"
                Background="#FF2D2D30"
                CornerRadius="0,0,8,8"
                Margin="10,6,10,10"
                BorderBrush="#FF5A5A5C"
                BorderThickness="1" Grid.RowSpan="2"
                MinHeight="60">
            <Grid Margin="20,14">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="STATUS:" Foreground="#FF8E8E93" FontSize="16" FontWeight="SemiBold" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="1" x:Name="StatusTextBlock" Text="Ready - G-Code Workspace" Foreground="#FF34C759" FontSize="16" FontWeight="Medium" Margin="8,0,0,0" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="2" x:Name="PartSizeTextBlock" Text="| PART: -" Foreground="#FFDDDDDD" FontSize="16" FontWeight="Medium" Margin="20,0,0,0" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="3" x:Name="FitStatusTextBlock" Text="| FIT: -" Foreground="#FFDDDDDD" FontSize="16" FontWeight="Medium" Margin="20,0,0,0" VerticalAlignment="Center"/>
            </Grid>
        </Border>

    </Grid>
</UserControl>